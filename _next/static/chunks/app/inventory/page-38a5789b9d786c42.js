(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{6563:(e,t,a)=>{Promise.resolve().then(a.bind(a,7403))},7403:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(5155),l=a(9159),n=a(2115);let i=e=>{let{selectedItem:t,isOpen:a,onClose:i,onAddItem:r,onUpdateItem:d}=e,[o,c]=(0,n.useState)(""),[m,u]=(0,n.useState)(""),[x,b]=(0,n.useState)(0),[p,h]=(0,n.useState)(0),[j,v]=(0,n.useState)(new Date);(0,n.useEffect)(()=>{N(),t&&(c(t.name),u(t.description),b(t.durationDays),h(t.quantity),v(t.lastUsed))},[t,a,i,r,d]);let g=async e=>{e.preventDefault();let a={name:o,description:m,durationDays:x,quantity:p,lastUsed:j};t?(await l.A.updateInventoryItem(a),d(a)):(await l.A.storeInventoryItem(a),r(a)),i()},N=()=>{c(""),u(""),b(0),h(0),v(new Date)};return(0,s.jsx)(s.Fragment,{children:a&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-base-100 p-6 rounded-lg shadow-lg w-96",children:[(0,s.jsxs)("h2",{className:"text-2xl mb-4",children:[t?"Update":"Add"," Inventory Item"]}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block",children:"Name"}),(0,s.jsx)("input",{id:"name",type:"text",value:o,onChange:e=>c(e.target.value),required:!0,className:"input input-bordered w-full",disabled:void 0!==t})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block",children:"Description"}),(0,s.jsx)("textarea",{id:"description",value:m,onChange:e=>u(e.target.value),required:!0,className:"input input-bordered w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"durationDays",className:"block",children:"Duration (Days)"}),(0,s.jsx)("input",{id:"durationDays",type:"number",value:x,onChange:e=>b(parseInt(e.target.value)),required:!0,className:"input input-bordered w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"quantity",className:"block",children:"Quantity"}),(0,s.jsx)("input",{id:"quantity",type:"number",value:p,onChange:e=>h(parseInt(e.target.value)),required:!0,className:"input input-bordered w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"lastUsed",className:"block",children:"Last Used"}),(0,s.jsx)("input",{id:"lastUsed",type:"date",value:j.toISOString().substring(0,10),onChange:e=>v(new Date(e.target.value)),required:!0,className:"input input-bordered w-full"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{N(),i()},className:"btn btn-ghost",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[t?"Save":"Add"," Item"]})]})]})]})})})};var r=a(256);let d=e=>{let{isOpen:t,onClose:a,onSubmit:l,item:i}=e,[r,d]=(0,n.useState)("");return((0,n.useEffect)(()=>{d(new Date().toISOString().split("T")[0])},[t]),t)?i?(0,s.jsx)("div",{className:"modal modal-open",children:(0,s.jsxs)("div",{className:"modal-box",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg",children:["Log Use for ",null==i?void 0:i.name]}),(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Usage date"}),(0,s.jsx)("input",{type:"date",className:"input input-bordered w-full",value:r,onChange:e=>d(e.target.value)})]}),(0,s.jsxs)("div",{className:"modal-action",children:[(0,s.jsx)("button",{className:"btn btn-outline",onClick:a,children:"Cancel"}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{i&&r&&l(i,new Date(r)),a()},disabled:!r,children:"Submit"})]})]})}):(0,s.jsx)("p",{children:"loading..."}):null};var o=a(604);let c=n.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?n.createElement("title",{id:s},a):null,n.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))});var m=a(6046);let u=()=>{let e=(0,m.useRouter)(),[t,a]=(0,n.useState)([]),[u,x]=(0,n.useState)(!1),[b,p]=(0,n.useState)(!1),[h,j]=(0,n.useState)(),{showApprovalModal:v}=(0,r.C)();(0,n.useEffect)(()=>{g()},[]);let g=async()=>{a(await l.A.getInventoryItems())},N=async(e,t)=>{console.log("".concat(e.name," used ").concat(t)),e.lastUsed=t,e.quantity-=1,await l.A.updateInventoryItem(e),g()},y=t=>{console.log("View details for:",t),e.push("/inventory/detail?itemKey=".concat(t.name))},f=e=>{console.log("Delete item:",e),v({title:"Delete ".concat(e.name),message:"Are you sure you want to delete the item <b>'".concat(e.name,"'</b>? <br> This action cannot be undone."),cancelText:"No",approveText:"Yes",onCancel:()=>console.log("Action cancelled"),onApprove:async()=>{await l.A.deleteInventoryItem(e),g()}})},w=e=>{j(e),x(!0)},C=e=>{j(e),p(!0)};return(0,s.jsxs)("div",{className:"grid items-center p-4 pb-20 gap-16 sm:p-20 font-[family-name:var(--font-geist-sans)]",children:[(0,s.jsxs)("main",{className:"",children:[(0,s.jsx)("button",{onClick:()=>w(),className:"btn btn-outline btn-primary",children:"Add Item"}),(0,s.jsx)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,s.jsx)("div",{className:"card bg-base-100 shadow-sm border border-base-300 p-4",children:(0,s.jsxs)("div",{className:"card-body p-1",children:[(0,s.jsxs)("span",{className:"flex justify-between",children:[(0,s.jsx)("h3",{className:"card-title text-lg font-semibold text-primary",children:e.name}),(0,s.jsx)("button",{onClick:()=>f(e),className:"btn btn-sm btn-outline btn-circle btn-error",children:(0,s.jsx)(c,{className:"w-5 h-5"})})]}),(0,s.jsx)("p",{className:"text-sm bg-base-100",children:e.description}),(0,s.jsxs)("div",{className:"mt-2 flex justify-between text-sm bg-base-100",children:[(0,s.jsxs)("span",{children:["Duration: ",e.durationDays," days"]}),(0,s.jsxs)("span",{children:["Quantity: ",e.quantity]})]}),(0,s.jsxs)("p",{className:"text-sm bg-base-100",children:["Last change: ",o.E.simpleFormatDate(e.lastUsed)]}),(0,s.jsx)("p",{className:"text-xs text-primary",children:(0,s.jsxs)("small",{children:[o.E.formatTimeDifference(e.lastUsed)," ago"]})}),(0,s.jsxs)("p",{className:"text-sm bg-base-100",children:["Next change: ",o.E.simpleFormatDate(l.A.getNextUseDateForItem(e))]}),(0,s.jsx)("p",{className:"text-xs ".concat(o.E.isPast(l.A.getNextUseDateForItem(e))?"text-error font-extrabold animate-bounce":"text-primary text-bold"),children:(0,s.jsxs)("small",{children:[o.E.formatTimeDifference(l.A.getNextUseDateForItem(e)),o.E.isPast(l.A.getNextUseDateForItem(e))?" in the past!":" from now"]})}),(0,s.jsxs)("p",{className:"text-md text-primary",children:["Supply ends: ",o.E.formatTimeDifference(l.A.getFinalValidDateForItem(e))]}),(0,s.jsx)("p",{className:"text-xs text-primary",children:(0,s.jsxs)("small",{children:["(",o.E.simpleFormatDate(l.A.getFinalValidDateForItem(e)),")"]})}),(0,s.jsxs)("div",{className:"card-actions justify-between mt-2",children:[(0,s.jsx)("span",{className:"flex justify-start gap-2",children:(0,s.jsx)("button",{onClick:()=>C(e),className:"btn btn-sm btn-outline btn-primary",children:"Log use"})}),(0,s.jsxs)("span",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>w(e),className:"btn btn-sm btn-outline btn-secondary",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>y(e),className:"btn btn-sm btn-outline btn-primary",children:"View Details"})]})]})]})},e.name))}),(0,s.jsx)(i,{selectedItem:h,isOpen:u,onClose:()=>{x(!1),j(void 0)},onAddItem:e=>{console.log("Item added",e),g()},onUpdateItem:e=>{console.log("Item updated",e),g()}}),(0,s.jsx)(d,{isOpen:b,onClose:()=>{p(!1),j(void 0)},onSubmit:N,item:h})]}),(0,s.jsx)("footer",{className:"row-start-3 flex gap-6 flex-wrap items-center justify-center"})]})}},256:(e,t,a)=>{"use strict";a.d(t,{ApproveModalProvider:()=>r,C:()=>d});var s=a(5155),l=a(2115),n=a(6457);let i=(0,l.createContext)(void 0),r=e=>{let{children:t}=e,[a,r]=(0,l.useState)(null),d=()=>r(null);return(0,s.jsxs)(i.Provider,{value:{showApprovalModal:e=>r(e),hideApprovalModal:d},children:[t,a&&(0,s.jsx)("div",{className:"modal modal-open",children:(0,s.jsxs)("div",{className:"modal-box",children:[a.title&&(0,s.jsx)("h3",{className:"font-bold text-lg",children:a.title}),a.message&&(0,s.jsx)("div",{className:"py-4",dangerouslySetInnerHTML:{__html:n.A.sanitize(a.message)}}),(0,s.jsxs)("div",{className:"modal-action",children:[(0,s.jsx)("button",{className:"btn btn-outline",onClick:()=>{var e;null===(e=a.onCancel)||void 0===e||e.call(a),d()},children:a.cancelText||"Cancel"}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{var e;null===(e=a.onApprove)||void 0===e||e.call(a),d()},children:a.approveText||"Approve"})]})]})})]})},d=()=>{let e=(0,l.useContext)(i);if(!e)throw Error("useModal must be used within a ModalProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[906,826,441,517,358],()=>t(6563)),_N_E=e.O()}]);